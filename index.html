<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>í‹°ìŠ¤í† ë¦¬ìš© ì±„íŒ…ë°© ìƒì„±ê¸°</title>
<style>
  body {
    font-family: 'Noto Sans KR', sans-serif;
    margin: 20px;
    background: #f9f9f9;
  }
  h1 { font-size: 20px; margin-bottom: 10px; }
  textarea, input {
    width: 100%;
    margin-bottom: 15px;
    padding: 10px;
    border: 1px solid #ccc;
    font-size: 14px;
    border-radius: 5px;
    box-sizing: border-box;
  }
  button {
    padding: 8px 15px;
    background: #0078d4;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-right: 5px;
  }
  .output {
    background: #fff;
    border: 1px solid #ccc;
    padding: 15px;
    white-space: pre-wrap;
    margin-top: 20px;
    font-size: 14px;
    border-radius: 5px;
  }
  .theme-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
  }
  .theme-buttons button {
    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    background: #0078d4;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    padding: 8px 15px;
    margin-right: 5px;
    transition: all 0.3s ease;
  }
  .theme-buttons button.selected {
    background: #ffb800;      /* ê³¨ë“œ ì»¬ëŸ¬ë¡œ ê°•ì¡° */
    color: #333;
    box-shadow: 0 0 8px rgba(255, 184, 0, 0.7);
    border: 2px solid #ffaa00;
  }
  .char-preview {
    display: flex;
    overflow-x: auto;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #ccc;
  }
  .char-item {
    text-align: center;
    margin-right: 15px;
    flex: 0 0 auto;
  }
  .char-item img {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: block;
    margin-bottom: 5px;
    object-fit: cover;
  }
</style>
</head>
<body>

<h1>í‹°ìŠ¤í† ë¦¬ìš© ì±„íŒ…ë°© ìƒì„±ê¸°</h1>
<details style="border:1px solid #ccc; border-radius:6px; padding:10px; background:#fff; max-width:600px; font-family:'Noto Sans KR', sans-serif; box-shadow:0 2px 6px rgba(0,0,0,0.1); margin:10px 0;">
  <summary style="cursor:pointer; font-weight:600; font-size:16px; color:#333; outline:none;">
    ğŸ“¢ ì•ˆë‚´ ì‚¬í•­
  </summary>
  <div style="margin-top:10px; font-size:14px; color:#555; line-height:1.5;">
    <ul style="padding-left:20px; margin:0;">
      <li>ìºë¦­í„°ë¥¼ ì§€ì •í•´(ì´ë¦„, ì´ë¯¸ì§€) ì±„íŒ…ë°©ì„ html í˜•íƒœë¡œ ìƒì„±í•˜ëŠ” ìƒì„±ê¸° ì…ë‹ˆë‹¤.</li>
      <li>í‹°ìŠ¤í† ë¦¬ì˜ html í¸ì§‘ê¸°ë¥¼ ì‚¬ìš©í•´, ë³µì‚¬í•œ ë‚´ìš©ì„ ë¶™ì—¬ë„£ê¸°!</li>
      <li>ë°°ê²½ìƒ‰ì´ ë§ˆìŒì— ì•ˆ ë“ ë‹¤ë©´, html ì½”ë“œ ë§¨ ìœ—ì¤„ 'background' ë’¤ë¥¼ ì›í•˜ëŠ” ì»¬ëŸ¬ì½”ë“œë¡œ ë³€ê²½í•´ë³´ì„¸ìš” ğŸ˜</li>
      <li>ì˜¤ë¥˜ë‚˜ í”¼ë“œë°±ì´ ìˆë‹¤ë©´ raeljung1010@gmail.comë¡œ ë¶€íƒë“œë ¤ìš”. <span style="font-size:16px;">(*á´—ÍˆË¬á´—Íˆ)ê•¤*.ï¾Ÿ</span></li>
    </ul>
  </div>
</details>



<!-- í…Œë§ˆ ì„ íƒ ë²„íŠ¼ -->
<h1>í…Œë§ˆ ì„ íƒ â˜ºï¸</h1>
<div class="theme-buttons">
  <button data-theme="kakao" onclick="setTheme('kakao')">ğŸ’¬ ì¹´ì¹´ì˜¤í†¡</button>
  <button data-theme="imessage" onclick="setTheme('imessage')">ğŸ“± ì•„ì´ë©”ì„¸ì§€</button>
  <button data-theme="samsung" onclick="setTheme('samsung')">ğŸ“© ì‚¼ì„±ë©”ì‹œì§€</button>
</div>

<label>âœ… ë‚´ ìºë¦­í„° (í˜•ì‹: ì´ë¦„, ì´ë¯¸ì§€ URL)</label>
<input type="text" id="myChar" placeholder="ì˜ˆ: ë‚˜, https://example.com/me.jpg" />

<label>âœ… ìƒëŒ€ë°© ìºë¦­í„° ë“±ë¡ (í˜•ì‹: ì´ë¦„, ì´ë¯¸ì§€ URL)</label>
<textarea id="characters" rows="4" placeholder="ì˜ˆ: ì² ìˆ˜, https://example.com/char1.jpg&#10;ì˜í¬, https://example.com/char2.jpg"></textarea>

<!-- ìºë¦­í„° ë¯¸ë¦¬ë³´ê¸° -->
<div class="char-preview" id="charPreview"></div>

<label>âœ… ëŒ€í™” ì…ë ¥ (í˜•ì‹: ì´ë¦„: ëŒ€ì‚¬)</label>
<textarea id="dialogue" rows="10" placeholder="ë‚˜: ì•ˆë…•&#10;ì² ìˆ˜: ë°˜ê°€ì›Œ&#10;ì˜í¬: í•˜ì´"></textarea>

<div>
  <button onclick="previewCharacters()">ìºë¦­í„° ë¯¸ë¦¬ë³´ê¸°</button>
  <button onclick="generateHTML()">HTML ìƒì„±</button>
  <button onclick="copyToClipboard()">ë³µì‚¬</button>
</div>

<div class="output" id="output"></div>

<script>
  const themes = {
    kakao: {
      background: '#f9e4b7',
      myBubble: '#ffeb33',
      otherBubble: '#ffffff',
      myTextColor: '#000000'
    },
    imessage: {
      background: '#ffffff',
      myBubble: '#007aff',
      otherBubble: '#e5e5ea',
      myTextColor: '#ffffff'
    },
    samsung: {
      background: '#ffffff',
      myBubble: '#2189ff',
      otherBubble: '#e7f3ff',
      myTextColor: '#ffffff'
    }
  };

  let currentTheme = themes.kakao;

  function setTheme(name) {
    currentTheme = themes[name];
    alert(`${name} í…Œë§ˆê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!`);

    const buttons = document.querySelectorAll('.theme-buttons button');
    buttons.forEach(btn => {
      if (btn.dataset.theme === name) {
        btn.classList.add('selected');
      } else {
        btn.classList.remove('selected');
      }
    });
  }

  function escapeHTML(str) {
    return str.replace(/[&<>"']/g, tag => (
      {'&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'}[tag]
    ));
  }

  function previewCharacters() {
    const myCharLine = document.getElementById('myChar').value.trim();
    const charLines = document.getElementById('characters').value.trim().split('\n');

    const charList = [];
    if (myCharLine.includes(',')) {
      const [name, url] = myCharLine.split(',').map(s => s.trim());
      if (name && url) charList.push({ name, url });
    }

    for (const line of charLines) {
      const [name, url] = line.split(',').map(s => s.trim());
      if (name && url) charList.push({ name, url });
    }

    const previewContainer = document.getElementById('charPreview');
    previewContainer.innerHTML = '';
    charList.forEach(c => {
      const div = document.createElement('div');
      div.className = 'char-item';
      div.innerHTML = `<img src="${c.url}" alt="${c.name}"><div>${c.name}</div>`;
      previewContainer.appendChild(div);
    });
  }

  function generateHTML() {
    const myCharLine = document.getElementById('myChar').value.trim();
    let myName = '', myImage = '';
    if (myCharLine.includes(',')) {
      [myName, myImage] = myCharLine.split(',').map(s => s.trim());
    }

    const charLines = document.getElementById('characters').value.trim().split('\n');
    const dialogueLines = document.getElementById('dialogue').value.trim().split('\n');

    const characterMap = {};
    if (myName && myImage) {
      characterMap[myName] = myImage;
    }
    for (const line of charLines) {
      const [name, url] = line.split(',').map(s => s.trim());
      if (name && url) {
        characterMap[name] = url;
      }
    }

    let html = `<div style="font-family: 'Noto Sans KR', sans-serif; font-weight: 300; background:${currentTheme.background}; padding:10px;">\n`;

    dialogueLines.forEach(line => {
      const sepIdx = line.indexOf(':');
      if (sepIdx === -1) return;

      const name = line.slice(0, sepIdx).trim();
      const message = escapeHTML(line.slice(sepIdx + 1).trim());
      const isMe = name === myName;

      const imgURL = characterMap[name] || 'https://via.placeholder.com/40';
      const align = isMe ? 'right' : 'left';
      const bubbleColor = isMe ? currentTheme.myBubble : currentTheme.otherBubble;
      const textColor = isMe ? currentTheme.myTextColor : '#000000';
      const textAlign = isMe ? 'right' : 'left';
      const marginSide = isMe ? 'left' : 'right';

      html += `
    <div style="overflow:hidden; margin-bottom:15px; clear:both;">
      <div style="float:${align}; margin-${marginSide}:10px;">
        <img src="${imgURL}"
            alt="${name}"
            style="width:40px; height:40px; border-radius:50%;">
      </div>
      <div style="display:inline-block; float:${align}; text-align:${textAlign}; max-width:80%;">
        <div style="font-size:12px; color:#555; text-align:${textAlign}; margin-bottom:3px;">${name}</div>
        <div style="display:inline-block; background:${bubbleColor}; color:${textColor}; padding:10px 15px; border-radius:10px; box-shadow:0 1px 3px rgba(0,0,0,0.1); font-size:13px; text-align:left;">${message}</div>
      </div>
    </div>\n`;
    });

    html += `</div>`;
    document.getElementById('output').innerText = html;
  }

  function copyToClipboard() {
    const text = document.getElementById('output').innerText;
    navigator.clipboard.writeText(text).then(() => {
      alert('HTML ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    });
  }
</script>

</body>
</html>
